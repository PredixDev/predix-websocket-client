{"name":"Predix-websocket-client","tagline":"","body":"<a href=\"../../../../pages/adoption/predix-websocket-client/javadocs/index.html\" target=\"_blank\" >\r\n\t<img height=\"50px\" width=\"100px\" src=\"images/javadoc.png\" alt=\"view javadoc\"></a>\r\n&nbsp;\r\n<a href=\"../../../../pages/adoption/predix-websocket-client\" target=\"_blank\">\r\n\t<img height=\"50px\" width=\"100px\" src=\"images/pages.jpg\" alt=\"view github pages\">\r\n</a>\r\n# predix-websocket-client\r\n\r\n\r\n\r\nWelcome to Predix Web Socket Client, a [Microcomponent](https://github.com/PredixDev/predix-rmd-ref-app/blob/master/docs/microcomponents.md) Utility.\r\n\r\nThe predix-websocket-client project provides websocket utility methods with helpers to manage Predix OAuth Security in the cloud. All the reference app microservices use this utility to make WebSocket calls in the cloud.\r\n\r\n1. Most of the time, you will make a dependency to predix-websocket-client by adding this to your pom.xml\r\n  \r\n  ```xml\r\n \t<dependency>\r\n\t\t<groupId>com.ge.predix.solsvc</groupId>\r\n\t\t<artifactId>predix-websocket-client</artifactId>\r\n\t\t<version>${predix-websocket-client.version}</version>\r\n\t</dependency>\r\n  ```\r\n  \r\n  \r\n1. If you started with a [Predix Microservice Template](https://github.com/predixdev/predix-microservice-templates) you will have a property in config/application.properties which spins up certain beans marked with the Local Profile.  Otherwise, add this property to your project.\r\n  ```\r\n  spring.profiles.active=local\r\n  ```\r\n  \r\n1. You also will want to check that Autowiring of these package is occurring by adding this file to your spring context \r\n  ```xml\r\n  \t\"classpath:META-INF/spring/predix-websocket-client-scan-context.xml\" \r\n  \r\n  \t\r\n  \twhich contains\r\n\t<context:component-scan\r\n            base-package=\"\r\n\t\tcom.ge.predix.solsvc.websocket.client\r\n        \" />\r\n\r\n  ```\r\n##Implement the Interface IWebSocketConfig  \r\n1. In your microservice that uses the Predix-Websocket-Client, implement IWebSocketConfig interface. This interface sets all the websocket related properties required by the WebSocketClient object. This design enables you to connect to more than one websocket server through your microservice. For each websocket server connection provide a set of websocket connections with a unique property name such as below:\r\n\r\n  ```\r\n\t#properties for WS connection #1\r\n\tpredix.websocket.uri1=wss://put.your.first.service.instance.here/v1/stream/messages\r\n\tpredix.websocket.zoneid1=put.your.first.zoneid.aka.instanceid.here\r\n\t\r\n\tpredix.websocket.pool.maxIdle1=5\r\n\tpredix.websocket.pool.maxActive1=5\r\n\tpredix.websocket.pool.maxWait1=8000\r\n\tpredix.websocket.pool.maxInstances1=5\r\n\t\r\n\t#properties for WS connection #2\r\n\tpredix.websocket.uri2=wss://put.your.second.service.instance.here/v1/stream/messages\r\n\tpredix.websocket.zoneid2=put.your.second.zoneid.aka.instanceid.here\r\n\t\r\n\tpredix.websocket.pool.maxIdle2=5\r\n\tpredix.websocket.pool.maxActive2=5\r\n\tpredix.websocket.pool.maxWait2=8000\r\n\tpredix.websocket.pool.maxInstances2=5\r\n   ```\r\n1. Now, implement the instances of the interface IWebSocketConfig. For an example please view [TestWebSocketConfig1.java](https://github.com/PredixDev/predix-websocket-client/blob/develop/src/test/java/com/ge/predix/solsvc/websocket/test/config/TestWebSocketConfig1.java)\r\n\r\n1. Or to view the source code you can download the project  \r\n  ```sh\r\n  $ git clone https://github.com/PredixDev/predix-websocket-client.git  \r\n  \r\n  $ cd predix-websocket-client\r\n  \r\n  $ mvn clean package  \r\n  \r\n    note: mvn clean install may run integration tests against services you may not have set up yet\r\n  ```\r\n##Proxy Settings\r\nIf you are behind a corporate proxy, please set the following in the properties file:\r\n```\r\npredix.oauth.proxyHost=(For Example: sjc1intproxy01.crd.ge.com)\r\n\r\npredix.oauth.proxyPort=(For Example: 8080)\r\n```\r\n##Running the Integration Tests (IT)\r\nThe ITs include tests to create a connection to a user specified Timeseries service instance, post data using different formats and sizes, and close connection. In order to execute the ITs, please follow these instructions:\r\n\r\n1) Set the following properties in predix-websocket-client/config/application.properties with your settings:\r\n```\r\n#e.g. predix.oauth.restHost=36492c1e-657c-4377-ac51-add963552460.predix-uaa.cloud.com\r\n\r\npredix.oauth.restHost=put.your.uaa.uri.here\r\n\r\npredix.oauth.clientId=put.your.clientId:put.your.clientSecret\r\n\r\n#e.g. predix.websocket.uri=wss://gateway-predix-timeseries.cloud.com/v1/stream/messages\r\n\r\npredix.websocket.uri=wss://put.your.websocket.service.instance.here/v1/stream/messages\r\n\r\npredix.websocket.zoneid=put.your.websocket.endpoint.zoneid.aka.instanceid.here\r\n```\r\n2) If you are behind a corporate proxy, please uncomment and set these properties as well:\r\n```\r\npredix.oauth.proxyHost =put.your.proxyHost.here\r\n\r\npredix.oauth.proxyPort=put.your.proxyPort.here\r\n```\r\n\r\n##Dependencies\r\n|Required - latest unless specified | Note |\r\n| ------------- | :----- |\r\n| Java 8 | |\r\n| GitHub Acct | logged in |\r\n| Git | |\r\n| Maven | https://artifactory.predix.io/artifactory/PREDIX-EXT |\r\n| CloudFoundry ClI 6.12.2 |  https://github.com/cloudfoundry/cli/tree/v6.12.2#downloads.  There is bug on this page, so you have to manually get the URL and the add \"&version=6.12.2\".  For example for Windows32 it would look like this...https://cli.run.pivotal.io/stable?release=windows32&source=github&version=6.12.2 |\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}